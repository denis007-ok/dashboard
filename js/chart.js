var d2021 = [{name: 'Налоговые', y: 132034, yy: 25.22, drilldown: 'tax'},
    {name: 'Неналоговые', y: 88510.3, yy: 2.26, drilldown: 'non-tax'},
    {name: 'Безвозмездные поступления', y: 411718.4, yy: 72.52, drilldown: 'gratuitous'},]

var dd2021 = [{name: 'Налоговые', id: 'tax', data: [{name: 'НДФЛ', y: 105722, yy: 105722}, {name: 'Налог на совокупный доход', y: 26312, yy: 26312}]},
    {name: 'Неналоговые', id: 'non-tax', data: [{name: 'Государственная пошлина', y: 1520.0, yy: ''}, {name: 'Доходы от использования имущества', y: 7173.7, yy: ''}, {name: 'Плата за негативное воздействие на окружающую среду', y: 93.6, yy: ''}, {name: 'Доходы от оказания платных услуг', y: 155, yy: ''}, {name: 'Доходы от продажи материальных и нематериальных активов', y: 79397, yy: ''}, {name: 'Штрафы санкции возмещение ущерба', y: 171, yy: ''}]},
    {name: 'Безвозмездные поступления', id: 'gratuitous', data: [{name: 'Дотации', y: 87579, yy: ''}, {name: 'Субсидии', y: 23081.2, yy: ''}, {name: 'Субвенции', y: 257413.0, yy: ''}, {name: 'Иные межбюджетные трансферты', y: 37595.2, yy: ''}, {name: 'Прочие безвозмездные поступления', y: 6050.0, yy: ''}]},]

var d2022 = [{name: 'Налоговые', y: 139374.8, yy: 26.75, drilldown: 'tax'},
    {name: 'Неналоговые', y: 82185.2, yy: 2.49, drilldown: 'non-tax'},
    {name: 'Безвозмездные поступления', y: 465224.2, yy: 70.76, drilldown: 'gratuitous'}];

var dd2022 = [{name: 'Налоговые', id: 'tax', data: [{name: 'НДФЛ', y: 111518.1, yy: 13}, {name: 'Налог на совокупный доход', y: 27856.7, yy: 13}]},
    {name: 'Неналоговые', id: 'non-tax', data: [{name: 'Государственная пошлина', y: 1681.5, yy: 13}, {name: 'Доходы от использования имущества', y: 7504, yy: 13}, {name: 'Плата за негативное воздействие на окружающую среду', y: 119.2, yy: 13}, {name: 'Доходы от продажи материальных и нематериальных активов', y: 72673, yy: 13}, {name: 'Штрафы санкции возмещение ущерба', y: 207.5, yy: 13}]},
    {name: 'Безвозмездные поступления', id: 'gratuitous', data: [{name: 'Дотации', y: 110244.5, yy: 13}, {name: 'Субсидии', y: 41708.6, yy: 13}, {name: 'Субвенции', y: 264867.7, yy: 13}, {name: 'Иные межбюджетные трансферты', y: 42403.4, yy: 13}, {name: 'Прочие безвозмездные поступления', y: 6000, yy: 13}]},];

var d2023 = [{name: 'Налоговые', y: 169375.2, yy: 25.22, drilldown: 'tax'},
    {name: 'Неналоговые', y: 14530.6, yy: 2.26, drilldown: 'non-tax'},
    {name: 'Безвозмездные поступления', y: 486995.6, yy: 72.52, drilldown: 'gratuitous'},]

var dd2023 = [{name: 'Налоговые', id: 'tax', data: [{name: 'НДФЛ', y: 141558.2, yy: 13}, {name: 'Налог на совокупный доход', y: 27817, yy: 14}]},
    {name: 'Неналоговые', id: 'non-tax', data: [{name: 'Государственная пошлина', y: 1710.0, yy: 13}, {name: 'Доходы от использования имущества', y: 6636.8, yy: 13}, {name: 'Плата за негативное воздействие на окружающую среду', y: 92.4, yy: 13}, {name: 'Доходы от оказания платных услуг', y: 43.2, yy: 13}, {name: 'Доходы от продажи материальных и нематериальных активов', y: 5508.8, yy: 13}, {name: 'Штрафы санкции возмещение ущерба', y: 539.4, yy: 13}]},
    {name: 'Безвозмездные поступления', id: 'gratuitous', data: [{name: 'Дотации', y: 102883.9, yy: 13}, {name: 'Субсидии', y: 39709.6, yy: 13}, {name: 'Субвенции', y: 293029.1, yy: 13}, {name: 'Иные межбюджетные трансферты', y: 45373.0, yy: 13}, {name: 'Прочие безвозмездные поступления', y: 6000.0, yy: 13}]},]

var d2024 = [{name: 'Налоговые', y: 193147, yy: 26.75, drilldown: 'tax'},
    {name: 'Неналоговые', y: 17957, yy: 2.49, drilldown: 'non-tax'},
    {name: 'Безвозмездные поступления', y: 510989.9, yy: 70.76, drilldown: 'gratuitous'}];

var dd2024 = [{name: 'Налоговые', id: 'tax', data: [{name: 'НДФЛ', y: 165143.0, yy: 13}, {name: 'Налог на совокупный доход', y: 28004, yy: 14}]},
    {name: 'Неналоговые', id: 'non-tax', data: [{name: 'Государственная пошлина', y: 1937.0, yy: 13}, {name: 'Доходы от использования имущества', y: 6007.8, yy: 13}, {name: 'Плата за негативное воздействие на окружающую среду', y: 200.2, yy: 13}, {name: 'Доходы от продажи материальных и нематериальных активов', y: 9500.0, yy: 13}, {name: 'Штрафы санкции возмещение ущерба', y: 312.0, yy: 13}]},
    {name: 'Безвозмездные поступления', id: 'gratuitous', data: [{name: 'Дотации', y: 104766.0, yy: 13}, {name: 'Субсидии', y: 32070.4, yy: 13}, {name: 'Субвенции', y: 325263.3, yy: 13}, {name: 'Иные межбюджетные трансферты', y: 48890.2, yy: 13}, {name: 'Прочие безвозмездные поступления', y: 0, yy: 13}]},];

var ddd = [539199.4, 629381.3, 734088.1, 671044.6, 722986.9];
var rrr = [538341.8, 627913.8, 688564.7, 713935.7, 731609.8];
var d_p = [ddd[0]-rrr[0],ddd[1]-rrr[1],ddd[2]-rrr[2],ddd[3]-rrr[3],ddd[4]-rrr[4]];

var pie = {
    chart: {
        backgroundColor: null,
        renderTo: 'pie',
        type: 'pie'
    },
    title: {
        text: 'Доходы бюджета на 2024 год План',
        align: 'left'
    },
    subtitle: {
        text: 'Щелкните по фрагментам, чтобы просмотреть детализацию',
        align: 'left'
    },
    accessibility: {
        announceNewData: {
            enabled: true
        },
        point: {
            valueSuffix: '%'
        }
    },
    legend: {
        enabled: false
    },
    plotOptions: {
        series: {showInLegend: true,
            borderRadius: 5,
            dataLabels: [{
                enabled: true,
                distance: 0,
                format: ''
            },
            {
                enabled: true,
                distance: '-35%',
                filter: {
                    property: 'percentage',
                    operator: '>',
                    value: 5
                },
                format: '{point.y:,.2f}',
                style: {
                    textDecoration: '',
                    fontSize: '0.9em',
                    textOutline: 'none',
                    
                }
            }]
        }
    },
    credits: false,
    tooltip: {
        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
        pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>{point.y:,.2f} тыс.руб.</b><br/>'
    },

    series: [
        {
            name: 'Доходы',
            colorByPoint: true,
            data: [
                {name: 'Налоговые', y: 193147, yy: 26.75, drilldown: 'tax'},
                {name: 'Неналоговые', y: 17957, yy: 2.49, drilldown: 'non-tax'},
                {name: 'Безвозмездные поступления', y: 510989.9, yy: 70.76, drilldown: 'gratuitous'},
            ]
        }],
    drilldown: {
        series: [
            {name: 'Налоговые', id: 'tax', data: [{name: 'НДФЛ', y: 165143.0, yy: 13}, {name: 'Налог на совокупный доход', y: 28004, yy: 14}]},
            {name: 'Неналоговые', id: 'non-tax', data: [{name: 'Государственная пошлина', y: 1937.0, yy: 13}, {name: 'Доходы от использования имущества', y: 6007.8, yy: 13}, {name: 'Плата за негативное воздействие на окружающую среду', y: 200.2, yy: 13}, {name: 'Доходы от продажи материальных и нематериальных активов', y: 9500.0, yy: 13}, {name: 'Штрафы санкции возмещение ущерба', y: 312.0, yy: 13}]},
            {name: 'Безвозмездные поступления', id: 'gratuitous', data: [{name: 'Дотации', y: 104766.0, yy: 13}, {name: 'Субсидии', y: 32070.4, yy: 13}, {name: 'Субвенции', y: 325263.3, yy: 13}, {name: 'Иные межбюджетные трансферты', y: 48890.2, yy: 13}, {name: 'Прочие безвозмездные поступления', y: 0, yy: 13}]},
        ]
    }
};



var columnAndPie = {
chart: {
    backgroundColor: null,
        renderTo: 'columnAndPie',
    },
title: {
    text: 'Поступления доходов по видам доходов',
    align: 'left'
},
xAxis: {
    categories: ['Налоговые', 'Неналоговые', 'Безвозмездные']
},
yAxis: {
    title: {
        text: 'тыс.руб.'
    }
},
tooltip: {
    valueSuffix: ' тыс.руб.'
},
plotOptions: {
    series: {
        borderRadius: '25%'
    }
},
credits: false,
series: [{
    type: 'column',
    name: '2021',
    data: [132034, 88510.3, 411718.4]
}, {
    type: 'column',
    name: '2022',
    data: [139374.8, 82185.2, 465224.2]
}, {
    type: 'column',
    name: '2023',
    data: [169375.2, 14530.6, 486995.6]
}, {
    type: 'column',
    name: '2024',
    data: [193147, 17957, 510989.9]
},{
    type: 'pie',
    name: 'Total',
    data: [{
        name: '2021',
        y: ddd[1],
        color: Highcharts.getOptions().colors[0], // 2020 color series: [{ data: [{y: 800}]}]
        dataLabels: {
            enabled: true,
            distance: -50,
            format: 'Доходы',
            style: {
                fontSize: '15px'
            }
        }
    }, {
        name: '2022',
        y: ddd[2],
        color: Highcharts.getOptions().colors[1] // 2021 color
    }, {
        name: '2023',
        y: ddd[3],
        color: Highcharts.getOptions().colors[2] // 2022 color
    },{
        name: '2024',
        y: ddd[4],
        color: Highcharts.getOptions().colors[2] // 2022 color
    }],
    center: [25, 25],
    size: 100,
    innerSize: '70%',
    showInLegend: false,
    dataLabels: {
        enabled: false
    }
}]
};

const data = {
    2020: [
        ['010', 2913.2],
        ['011', 39130.5],
        ['012', 60515.2],
        ['041', 16828.5],
        ['051', 0],
        ['073', 350802.1],
        ['084', 48079.5],
    ],
    2021: [
        ['010', 1990.1],
        ['011', 52144.7],
        ['012', 68007.9],
        ['041', 15156.4],
        ['051', 156.6],
        ['073', 442525.8],
        ['084', 56784.8],
    ],
    2022: [
        ['010', 967.4],
        ['011', 62086.3],
        ['012', 76976.5],
        ['041', 17388.9],
        ['051', 982.8],
        ['073', 469774.8],
        ['084', 63697.5],
    ],
    2023: [
        ['010', 1021.0],
        ['011', 113072.6],
        ['012', 66309.2],
        ['041', 15340.2],
        ['051', 1528.5],
        ['073', 453412.1],
        ['084', 72338.3],
    ],
    2024: [
        ['010', 903.1],
        ['011', 47308.6],
        ['012', 65966.0],
        ['041', 28867.6],
        ['051', 1687.1],
        ['073', 469666.5],
        ['075', 30257.7],
        ['084', 77437.3]
    ]
};

const countries = {
    '010': {
        name: 'Совет депутатов',
        color: '#FE2371'
    },
    '011': {
        name: 'Администрация',
        color: '#544FC5'
    },
    '012': {
        name: 'Управление по финансам',
        color: '#2CAFFE'
    },
    '041': {
        name: 'ОАГЖКиДХ',
        color: '#FE6A35'
    },
    '051': {
        name: 'Счетная палата',
        color: '#6B8ABC'
    },
    '073': {
        name: 'Управление образования',
        color: '#1C74BD'
    },
    '075': {
        name: 'Отдел молодежной политики',
        color: '#00A6A6'
    },
    '084': {
        name: 'Управление культуры',
        color: '#D568FB'
    }
};
for (const [key, value] of Object.entries(countries)) {
    value.ucCode = key.toUpperCase();
}

const getData = data => data.map(point => ({
    name: point[0],
    y: point[1],
    color: countries[point[0]].color
}));

var column= {
    chart: {
        backgroundColor: null,
        renderTo: 'column',
        type: 'column',
        zooming: {
            type: 'y'}
    },
    
    // Custom option for templates
    countries,
    title: {
        text: 'Ведомственная структура расходов за 2024 год.',
        align: 'left'
    },
    subtitle: {
        text: 'Сравнение расходов с 2023 годом.',
        align: 'left'
    },
    plotOptions: {
        series: {
            grouping: false,
            borderWidth: 0
        }
    },
    legend: {
        enabled: false
    },
    tooltip: {
        positioner: function () {
            return { x: 80, y: 50 };},
        shared: true,
        headerFormat: '<span style="font-size: 15px">' +
            '{series.chart.options.countries.(point.key).name}' +
            '</span><br/>',
        pointFormat: '<span style="color:{point.color}">\u25CF</span> ' +
            '{series.name}: <b>{point.y} тыс. &#8381</b><br/>'
    },
    credits: false,
    xAxis: {
        type: 'category',
        accessibility: {
            description: 'Countries'
        },
        
        labels: {
            useHTML: true,
            animate: true,
            format: '',
            style: {
                textAlign: 'center'
            }
        }
    },
    yAxis: [{
        lineColor: 'black',
        lineWidth: 1,
        title: {
            text: 'тыс.руб.'
        },
        tickInterval: 10000,
        breaks: [{
            from: 70000,
            to: 440000
        }],
        events: {
            pointBreak: pointBreakColumn,
            pointOutsideOfBreak: pointOutsideOfBreak
        },
        showFirstLabel: false,
        max: 480000,
    }],
    series: [{
        color: 'rgba(158, 159, 163, 0.5)',
        pointPlacement: -0.2,
        linkedTo: 'main',
        data: data[2023].slice(),
        name: '2023'
    }, {
        name: '2024',
        id: 'main',
        dataSorting: {
            enabled: false,
            matchByName: true
        },
        dataLabels: [{
            enabled: false,
            inside: true,
            style: {
                fontSize: '16px'
            }
        }],
        data: getData(data[2024]).slice()
    }],
    exporting: {
        allowHTML: true
    }
};

var column3 = {
    chart: {
        backgroundColor: null,
        renderTo: 'column3',
        type: 'column'
    },
    title: {
        text: 'Динамика исполнения бюжета',
        align: 'left'
    },
    subtitle: {
        text: '',
        align: 'left'
    },
    legend: {
        enabled: false
    },
    xAxis: {
        categories: ['2021', '2022', '2023', '2024'],
        crosshair: true,
        accessibility: {
            description: 'Countries'
        }
    },
    yAxis: {
        min: 0,
        title: {
            text: 'тысяч рублей'
        }
    },
    tooltip: {
        shared: true,
        headerFormat: '<span style="font-size: 15px">' +
            '{series.chart.options.name}' +
            '</span><br/>',
        pointFormat: '<span style="color:{point.color}">\u25CF</span> ' +
            '{series.name}: <b>{point.y} тыс. &#8381</b><br/>'
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        },
        series: {
            grouping: false,
            borderWidth: 0
        }
    },
    series: [{
        color: 'rgba(158, 159, 163, 0.5)',
        pointPlacement: -0.2,
        linkedTo: 'main',
        data: [636766.2, 691874.2, 723021.9, 731609.8],
        name: 'План'
    }, {
        name: 'Факт',
        id: 'main',
        dataSorting: {
            enabled: false,
            matchByName: true
        },
        dataLabels: [{
            enabled: false,
            inside: true,
            style: {
                fontSize: '16px'
            }
        }],
        data: [627913.8, 688564.7, 713935.7, 231662.4]
    }],
    
    /*series: [
        {
            name: 'Расходы',
            data: [629381.3, 734088.1, 671044.6, 722986.9],
        }
    ],*/
    credits: {
        enabled: false
    },
};

var dr = {
    chart: {
        renderTo: 'column2',
        plotBackgroundColor: null,
        plotBorderWidth: 0,
        plotShadow: false,
        type: 'column',
        
        backgroundColor: 'transparent',
        marginTop: 60,
        marginRight: 30
    },

    title:
    {
        text: null,
        align: 'left',

    },
    subtitle:
    {
        text: 'Характеристика исполнения бюджета',
        align: 'left',
    },

    xAxis: {
        categories: [2024],
    },

    yAxis: {
        allowDecimals: false,
        min: 0,
        
        title: {
            text: 'тыс.руб.'
        },
        labels:
        {
            enabled: true,
            align: 'right',
            color: 'white',
            formatter: function () {
                return Highcharts.numberFormat(this.value, 0, ',', ' ');
            }
        }
    },

    tooltip:
     {
         crosshairs: true,
         shared: false,

         formatter: function () { 
            return '<b>'+this.series.name+'</b>' + '<br>Объём показателя: ' + Highcharts.numberFormat(this.y, 2, ',', ' ') + ' тыс.руб.'+'<br>';
         }
     },

    plotOptions: {
        column: {
            stacking: 'normal'
        }
    },
    legend: {
        floating: false,
        align: 'center',
        verticalAlign: 'bottom',
        backgroundColor: 'transparent',
        shadow: false
    },
    series: [{
        name: 'Дефицит',
        data: [Math.abs(d_p[4])],
        stack: 'male',
        color: '#fd9369'

    }, {
        name: 'Доходы',
        data: [ddd[4]],
        stack: 'male',
        color: '#aad370',
    }, {
        name: 'Расходы',
        data: [rrr[4]],
        stack: 'female',
        color: '#FD991D'
    }],
    navigation: {
        buttonOptions: {
            enabled: false
        }
    },
    credits:
    {
        enabled: false
    }
};

const data100 = {
    2021: [['0102', 1575165.00], ['0103', 1026950.00], ['0104', 17285446.74], ['0105', 101400.00], ['0106', 11767237.20], ['0111', 45470.00], ['0113', 14468474.00]],
    2022: [['0102', 1765400.00], ['0103', 967404.00], ['0104', 18443301.84], ['0105', 136900.00], ['0106', 11817160.00], ['0111', 19304.83], ['0113', 15604839.40]],
    2023: [['0102', 2028000.00], ['0103', 1021000.00], ['0104', 19611708.98], ['0105', 8200.00], ['0106', 12780815.00], ['0111', 2095.38], ['0113', 17399592.45]],
    2024: [['0102', 2028000.00], ['0103', 1021000.00], ['0104', 19611708.98], ['0105', 8200.00], ['0106', 12780815.00], ['0111', 2095.38], ['0113', 17399592.45],]
};
const data200 = {
    2021: [['0203', 1478400.00], ['0204', 6000000.00]],
    2022: [['0203', 74420.00], ['0204', 6000000.00]],
    2023: [['0203', 85203.00], ['0204', 6000000.00]],
    2024: [['0203', 1478400.00], ['0204', 6000000.00]]
};
const data300 = {
    2021: [['0304', 1072800.00], ['0310', 2807237.00], ['0314', 50000.00]],
    2022: [['0304', 920700.00], ['0310', 3693000.00], ['0314', 93000.00]],
    2023: [['0304', 1340222.25], ['0310', 3921700.00], ['0314', 100000.00]],
    2024: [['0304', 500000.00], ['0310', 2807237.00], ['0314', 50000.00]]
};
const data400 = {
    2021: [['0405', 3779800.00], ['0412', 5657411.00]],
    2022: [['0405', 3949527.00], ['0408', 147907.20], ['0412', 10741730.57]],
    2023: [['0405', 4926449.00], ['0408', 141565.20], ['0412', 7102110.28]],
    2024: [['0405', 4926449.00], ['0408', 141565.20], ['0412', 7102110.28]]
};
const data500 = {
    2021: [['0501', 1129952.22], ['0502', 5812.00], ['0505', 16947.78]],
    2022: [['0501', 1204730.03], ['0502', 6197.16], ['0505', 18069.97]],
    2023: [['0501', 1324138.13], ['0505', 19861.87]],
    2024: [['0501', 1324138.13], ['0505', 19861.87]]
};
const data600 = {
    2021: [[]],
    2022: [['0605', 27100.00]],
    2023: [['0605', 92400.00]],
    2024: [['0605', 27100.00]]
};
const data700 = {
    2021: [['0701', 79152732.78], ['0702', 271581095.66], ['0703', 64034238.6], ['0707', 489661.96], ['0709', 14692571.00]],
    2022: [['0701', 94042939.63], ['0702', 283336458.95], ['0703', 56066474.55], ['0707', 574386.41], ['0709', 24723718.98]],
    2023: [['0701', 90806387.03], ['0702', 304825461.47], ['0703', 44377351.08], ['0705', 28219.00], ['0707', 742100.82], ['0709', 22809230.93]],
    2024: [['0701', 94042939.63], ['0702', 283336458.95], ['0703', 44377351.08], ['0705', 28219.00], ['0707', 742100.82], ['0709', 22809230.93]]
};
const data800 = {
    2021: [['0801', 33326890.71], ['0804', 13573545000]],
    2022: [['0801', 34527900.96], ['0804', 16523665]],
    2023: [['0801', 41030192], ['0804', 18695308]],
    2024: [['0801', 33326890.71], ['0804', 13573545000]]
};
const data900 = {
    2021: [['0909', 100000.00]],
    2022: [['0909', 1474000.00]],
    2023: [['0909', 100000.00]],
    2024: [['0909', 449.00]]
};
const data1000 = {
    2021: [['1001', 4753163.85], ['1003', 127600.00], ['1004', 29360710.00],  ['1006', 162290.00]],
    2022: [['1001', 4539245.76], ['1003', 117126.68], ['1004', 29775320], ['1006', 226480]],
    2023: [['1001', 4895900.00], ['1003', 130000], ['1004', 26006206.13], ['1006', 238593.87]],
    2024: [['1001', 4895900.00], ['1003', 130000], ['1004', 26006206.13], ['1006', 238593.87]]
};
const data1100 = {
    2021: [['1101', 350000.00], ['1102', 4790000.00], ['1105', 1002000.00]],
    2022: [['1101', 380000.00], ['1102', 8450036.84],],
    2023: [['1101', 5832271.96], ['1102', 34568616.17],]
};
const data1400 = {
    2021: [['1401', 42974000.00], ['1402', 4281200.00], ['1403', 3745968.80]],
    2022: [['1401', 44693000.00], ['1402', 6942800.00], ['1403', 9850000.00]],
    2023: [['1401', 48677000.00], ['1402', 140000.00], ['1403', 1214000.00]],
    2024: [['1401', 48677000], ['1402', 140000], ['1403', 1214000]]
};
const datarzpz = {
    2020: [{name: '0100', y: 46270142.94, drilldown: '0100'}, {name: '0200', y: 7478400.00, drilldown: '0200'}, {name: '0300', y: 3930037.00, drilldown: '0300'}, {name: '0400', y: 9437211.00, drilldown: '0400'}, {name: '0500', y: 1152712.00, drilldown: '0500'}, {name: '0600', y: 1152712.00, drilldown: '0600'}, {name: '0700', y: 429950300.00, drilldown: '0700'}, {name: '0800', y: 46900435.71, drilldown: '0800'}, {name: '0900', y: 100000.00, drilldown: '0900'}, {name: '1000', y: 34403763.85, drilldown: '1000'}, {name: '1100', y: 6142000.00, drilldown: '1100'}, {name: '1400', y: 51001168.80, drilldown: '1400'}],
    2021: [{name: '0100', y: 46270142.94, drilldown: '0100'}, {name: '0200', y: 7478400.00, drilldown: '0200'}, {name: '0300', y: 3930037.00, drilldown: '0300'}, {name: '0400', y: 9437211.00, drilldown: '0400'}, {name: '0500', y: 1152712.00, drilldown: '0500'}, {name: '0600', y: 1152712.00, drilldown: '0600'}, {name: '0700', y: 429950300.00, drilldown: '0700'}, {name: '0800', y: 46900435.71, drilldown: '0800'}, {name: '0900', y: 100000.00, drilldown: '0900'}, {name: '1000', y: 34403763.85, drilldown: '1000'}, {name: '1100', y: 6142000.00, drilldown: '1100'}, {name: '1400', y: 51001168.80, drilldown: '1400'}],
    2022: [{name: '0100', y: 48754310.07, drilldown: '0100'}, {name: '0200', y: 6074420.00, drilldown: '0200'}, {name: '0300', y: 4706700.00, drilldown: '0300'}, {name: '0400', y: 14839164.77, drilldown: '0400'}, {name: '0500', y: 1228997.16, drilldown: '0500'}, {name: '0600', y: 27100.00, drilldown: '0600'}, {name: '0700', y: 458743978.52, drilldown: '0700'}, {name: '0800', y: 51051565.96, drilldown: '0800'}, {name: '0900', y: 1474000.00, drilldown: '0900'}, {name: '1000', y: 34658172.44, drilldown: '1000'}, {name: '1100', y: 8830036.84, drilldown: '1100'}, {name: '1400', y: 61485800.00, drilldown: '1400'}],
    2023: [{name: '0100', y: 52851411.81, drilldown: '0100'}, {name: '0200', y: 6085203.00, drilldown: '0200'}, {name: '0300', y: 5361922.25, drilldown: '0300'}, {name: '0400', y: 12170124.48, drilldown: '0400'}, {name: '0500', y: 1344000.00, drilldown: '0500'}, {name: '0600', y: 92400.00, drilldown: '0600'}, {name: '0700', y: 463588750.33, drilldown: '0700'}, {name: '0800', y: 59725500.00, drilldown: '0800'}, {name: '0900', y: 100000.00, drilldown: '0900'}, {name: '1000', y: 31270700.00, drilldown: '1000'}, {name: '1100', y: 40400888.13, drilldown: '1100'}, {name: '1400', y: 50031000.00, drilldown: '1400'}],
    2024: [{name: '0100', y: 53851411.81, drilldown: '0100'}, {name: '0200', y: 6085203.00, drilldown: '0200'}, {name: '0300', y: 5361922.25, drilldown: '0300'}, {name: '0400', y: 12170124.48, drilldown: '0400'}, {name: '0500', y: 1344000.00, drilldown: '0500'}, {name: '0600', y: 92400.00, drilldown: '0600'}, {name: '0700', y: 463588750.33, drilldown: '0700'}, {name: '0800', y: 59725500.00, drilldown: '0800'}, {name: '0900', y: 100000.00, drilldown: '0900'}, {name: '1000', y: 31270700.00, drilldown: '1000'}, {name: '1100', y: 40400888.13, drilldown: '1100'}, {name: '1400', y: 50031000.00, drilldown: '1400'}]
};

const datarzpz1 = {
    2020: [{name: '0100', y: 46270.1, drilldown: '0100'}, {name: '0200', y: 7478.4, drilldown: '0200'}, {name: '0300', y: 3930.0, drilldown: '0300'}, {name: '0400', y: 9437.2, drilldown: '0400'}, {name: '0500', y: 1152.7, drilldown: '0500'}, {name: '0600', y: 1152.7, drilldown: '0600'}, {name: '0700', y: 429950.3, drilldown: '0700'}, {name: '0800', y: 46900.4, drilldown: '0800'}, {name: '0900', y: 100.0, drilldown: '0900'}, {name: '1000', y: 34403.8, drilldown: '1000'}, {name: '1100', y: 6142.0, drilldown: '1100'}, {name: '1400', y: 51001.2, drilldown: '1400'}],
    2021: [{name: '0100', y: 46270.1, drilldown: '0100'}, {name: '0200', y: 7478.4, drilldown: '0200'}, {name: '0300', y: 3930.0, drilldown: '0300'}, {name: '0400', y: 9437.2, drilldown: '0400'}, {name: '0500', y: 1152.7, drilldown: '0500'}, {name: '0600', y: 1152.7, drilldown: '0600'}, {name: '0700', y: 429950.3, drilldown: '0700'}, {name: '0800', y: 46900.4, drilldown: '0800'}, {name: '0900', y: 100.0, drilldown: '0900'}, {name: '1000', y: 34403.8, drilldown: '1000'}, {name: '1100', y: 6142.0, drilldown: '1100'}, {name: '1400', y: 51001.2, drilldown: '1400'}],
    2022: [{name: '0100', y: 48754.3, drilldown: '0100'}, {name: '0200', y: 6074.4, drilldown: '0200'}, {name: '0300', y: 4706.7, drilldown: '0300'}, {name: '0400', y: 14839.2, drilldown: '0400'}, {name: '0500', y: 1228.9, drilldown: '0500'}, {name: '0600', y: 27.1, drilldown: '0600'}, {name: '0700', y: 458743.9, drilldown: '0700'}, {name: '0800', y: 51051.6, drilldown: '0800'}, {name: '0900', y: 1474.0, drilldown: '0900'}, {name: '1000', y: 34658.2, drilldown: '1000'}, {name: '1100', y: 8830.0, drilldown: '1100'}, {name: '1400', y: 61485.8, drilldown: '1400'}],
    2023: [{name: '0100', y: 52851.4, drilldown: '0100'}, {name: '0200', y: 6085.2, drilldown: '0200'}, {name: '0300', y: 5361.9, drilldown: '0300'}, {name: '0400', y: 12170.2, drilldown: '0400'}, {name: '0500', y: 1344.0, drilldown: '0500'}, {name: '0600', y: 92.4, drilldown: '0600'}, {name: '0700', y: 463588.7, drilldown: '0700'}, {name: '0800', y: 59725.5, drilldown: '0800'}, {name: '0900', y: 100.0, drilldown: '0900'}, {name: '1000', y: 31270.7, drilldown: '1000'}, {name: '1100', y: 40400.9, drilldown: '1100'}, {name: '1400', y: 50031.0, drilldown: '1400'}],
    2024: [{name: '0100', y: 53851.4, drilldown: '0100'}, {name: '0200', y: 6085.2, drilldown: '0200'}, {name: '0300', y: 5361.9, drilldown: '0300'}, {name: '0400', y: 12170.2, drilldown: '0400'}, {name: '0500', y: 1344.0, drilldown: '0500'}, {name: '0600', y: 92.4, drilldown: '0600'}, {name: '0700', y: 463588.7, drilldown: '0700'}, {name: '0800', y: 59725.5, drilldown: '0800'}, {name: '0900', y: 100.0, drilldown: '0900'}, {name: '1000', y: 31270.7, drilldown: '1000'}, {name: '1100', y: 40400.9, drilldown: '1100'}, {name: '1400', y: 50031.0, drilldown: '1400'}]
};

const datarzpz2 = {
    2020: [{name: '0100', data: [{name: 'Общегосударственные вопросы', value: 46530.2}]}, {name: '0200', data: [{name: 'Национальная оборона', value: 3696.7}]}, {name: '0300', data: [{name: 'Национальная безопасность и правоохранительная деятельность', value: 5382.1}]}, {name: '0400', data: [{name: 'Национальная экономика', value: 11737.3}]}, {name: '0500', data: [{name: 'Жилищно-коммунальное хозяйство', value: 2446.9}]}, {name: '0600', data: [{name: 'Охрана окружающей среды', value: 362.2}]}, {name: '0700', data: [{name: 'Образование', value: 469519.4}]}, {name: '0800', data: [{name: 'Культура. кинематография', value: 67130.8}]}, {name: '0900', data: [{name: 'Здравоохранение', value: 100.0}]}, {name: '1000', data: [{name: 'Социальная политика', value: 43264.2}]}, {name: '1100', data: [{name: 'Физическая культура и спорт', value: 28890.0}]}, {name: '1400', data: [{name: 'Межбюджетные трансферты', value: 51549.0}]}],
    2021: [{name: '0100', data: [{name: 'Общегосударственные вопросы', value: 46052.8}]}, {name: '0200', data: [{name: 'Национальная оборона', value: 7478.4}]}, {name: '0300', data: [{name: 'Национальная безопасность и правоохранительная деятельность', value: 3930.0}]}, {name: '0400', data: [{name: 'Национальная экономика', value: 9429.4}]}, {name: '0500', data: [{name: 'Жилищно-коммунальное хозяйство', value: 1152.6}]}, {name: '0700', data: [{name: 'Образование', value: 426752.1}]}, {name: '0800', data: [{name: 'Культура. кинематография', value: 46900.4}]}, {name: '0900', data: [{name: 'Здравоохранение', value: 100.0}]}, {name: '1000', data: [{name: 'Социальная политика', value: 31460.0}]}, {name: '1100', data: [{name: 'Физическая культура и спорт', value: 6126.9}]}, {name: '1400', data: [{name: 'Межбюджетные трансферты', value: 48531.2}]}],
    2022: [{name: '0100', data: [{name: 'Общегосударственные вопросы', value: 48689.2}]}, {name: '0200', data: [{name: 'Национальная оборона', value: 6074.4}]}, {name: '0300', data: [{name: 'Национальная безопасность и правоохранительная деятельность', value: 4706.7}]}, {name: '0400', data: [{name: 'Национальная экономика', value: 14250.0}]}, {name: '0500', data: [{name: 'Жилищно-коммунальное хозяйство', value: 1228.9}]}, {name: '0700', data: [{name: 'Образование', value: 457419.0}]}, {name: '0800', data: [{name: 'Культура. кинематография', value: 51051.6}]}, {name: '0900', data: [{name: 'Здравоохранение', value: 1474.0}]}, {name: '1000', data: [{name: 'Социальная политика', value: 33501.5}]}, {name: '1100', data: [{name: 'Физическая культура и спорт', value: 8829.8}]}, {name: '1400', data: [{name: 'Межбюджетные трансферты', value: 61339.4}]}],
    2023: [{name: '0100', data: [{name: 'Общегосударственные вопросы', value: 52519.7}]}, {name: '0200', data: [{name: 'Национальная оборона', value: 3588.5}]}, {name: '0300', data: [{name: 'Национальная безопасность и правоохранительная деятельность', value: 5361.9}]}, {name: '0400', data: [{name: 'Национальная экономика', value: 12156.5}]}, {name: '0500', data: [{name: 'Жилищно-коммунальное хозяйство', value: 1344.0}]}, {name: '0600', data: [{name: 'Охрана окружающей среды', value: 92.4}]}, {name: '0700', data: [{name: 'Образование', value: 461468.7}]}, {name: '0800', data: [{name: 'Культура. кинематография', value: 59309.7}]}, {name: '0900', data: [{name: 'Здравоохранение', value: 100.0}]}, {name: '1000', data: [{name: 'Социальная политика', value: 29097.7}]}, {name: '1100', data: [{name: 'Физическая культура и спорт', value: 38865.6}]}, {name: '1400', data: [{name: 'Межбюджетные трансферты', value: 50031.0}]}],
    2024: [{name: '0100', data: [{name: 'Общегосударственные вопросы', value: 46530.2}]}, {name: '0200', data: [{name: 'Национальная оборона', value: 3696.7}]}, {name: '0300', data: [{name: 'Национальная безопасность и правоохранительная деятельность', value: 5382.1}]}, {name: '0400', data: [{name: 'Национальная экономика', value: 11737.3}]}, {name: '0500', data: [{name: 'Жилищно-коммунальное хозяйство', value: 2446.9}]}, {name: '0600', data: [{name: 'Охрана окружающей среды', value: 362.2}]}, {name: '0700', data: [{name: 'Образование', value: 469519.4}]}, {name: '0800', data: [{name: 'Культура. кинематография', value: 67130.8}]}, {name: '0900', data: [{name: 'Здравоохранение', value: 100.0}]}, {name: '1000', data: [{name: 'Социальная политика', value: 43264.2}]}, {name: '1100', data: [{name: 'Физическая культура и спорт', value: 28890.0}]}, {name: '1400', data: [{name: 'Межбюджетные трансферты', value: 51549.0}]}]
};

function pointBreakColumn(e) {
    var point = e.point,
        brk = e.brk,
        shapeArgs = point.shapeArgs,
        x = shapeArgs.x,
        y = this.translate(brk.from, 0, 1, 0, 1),
        w = shapeArgs.width,
        key = ['brk', brk.from, brk.to],
        path = ['M', x, y, 'L', x + w * 0.25, y + 4, 'L', x + w * 0.75, y - 4, 'L', x + w, y];

    if (!point[key]) {
        point[key] = this.chart.renderer.path(path)
            .attr({
                'stroke-width': 2,
                stroke: point.series.options.borderColor
            })
            .add(point.graphic.parentGroup);
    } else {
        point[key].attr({
            d: path
        });
    }
};
function pointOutsideOfBreak(e) {
    const point = e.point,
        brk = e.brk,
        key = ['brk', brk.from, brk.to];

    if (point[key]) {
        point[key].destroy();
        delete point[key];
    }
};

const countries2 = {
    '0100': {
        name: 'Общегосударственные вопросы',
        color: '#FE2371'
    },
    '0200': {
        name: 'Национальная оборона',
        color: '#544FC5'
    },
    '0300': {
        name: 'Национальная безопасность и правоохранительная деятельность',
        color: '#2CAFFE'
    },
    '0400': {
        name: 'Национальная экономика',
        color: '#FE6A35'
    },
    '0500': {
        name: 'Жилищно-коммунальное хозяйство',
        color: '#6B8ABC'
    },
    '0600': {
        name: 'Охрана окружающей среды',
        color: '#1C74BD'
    },
    '0700': {
        name: 'Образование',
        color: '#00A6A6'
    },
    '0800': {
        name: 'Культура. кинематография',
        color: '#D568FB'
    },
    '0900': {
        name: 'Здравоохранение',
        color: '#D568FB'
    },
    '1000': {
        name: 'Социальная политика',
        color: '#D568FB'
    },
    '1100': {
        name: 'Физическая культура и спорт',
        color: '#D568FB'
    },
    '1400': {
        name: 'Межбюджетные трансферты',
        color: '#D568FB'
    }
};

var colrzpz = {
    chart: {
        backgroundColor: null,
        renderTo: 'rzpz',
        type: 'packedbubble',
        height: 400,
        width: 500
    },
    title: {
        text: 'Структура расходов по отраслям за 2024 год.',
        align: 'left'
    },
    tooltip: {
        useHTML: true,
        pointFormat: '<b>{point.name}:</b> {point.value}</sub>'
    },
    credits: false,
    plotOptions: {
        packedbubble: {
            minSize: '30%',
            maxSize: '100%',
            zMin: 0,
            zMax: 50000,
            layoutAlgorithm: {
                splitSeries: false,
                gravitationalConstant: 0.01
            },
            dataLabels: {
                enabled: true,
                format: '{point.name}',
                filter: {
                    property: 'y',
                    operator: '>',
                    value: 4000
                },
                style: {
                    color: 'black',
                    textOutline: 'none',
                    fontWeight: 'normal'
                }
            }
        }
    },
    series: datarzpz2[2024].slice(),
};

/*var colrzpz = {
    chart: {
        backgroundColor: null,
        renderTo: 'rzpz',
        type: 'bar',
        zooming: {
            type: 'y'}
    },
    countries2,
    title: {
        text: 'Структура расходов по отраслям за 2024 год.',
        align: 'left'
    },
    subtitle: {
        text: '',
        align: 'left'
    },  
    plotOptions: {
        bar: {
            borderRadius: '20%',
            dataLabels: {
                enabled: true
            },
            groupPadding: 0.1
        }
    },
    legend: {
        enabled: false
    },
    tooltip: {

        shared: true,
        headerFormat: '<span style="font-size: 15px">' +
            '{series.chart.options.countries2.(point.key).name}' +
            '</span><br/>',
        pointFormat: '<span style="color:{point.color}">\u25CF</span> ' +
            '<b>{point.y} тыс.руб.</b><br/>'
    },
    xAxis: {
        type: 'category',
        title: {
            text: null
        },
        gridLineWidth: 1,
        lineWidth: 0
    },
    yAxis: [{
        lineColor: 'black',
        lineWidth: 2,
        title: {
            text: 'Тысяч рублей',
            align: 'high',
        },
        tickInterval: 10000,
        breaks: [{
            from: 60000,
            to: 440000
        }],
        events: {
            pointBreak: pointBreakColumn,
            pointOutsideOfBreak: pointOutsideOfBreak
        },
        showFirstLabel: false,
        max: 470000,
    }],
    credits: false,
    series: [{
            colorByPoint: true,
            data: datarzpz2[2024].slice(),
        }],
    
};*/

let prog = {
    2020: [['62 0 00 00000', 50.0], ['63 0 00 00000', 15159.2], ['64 0 00 00000', 15.0], ['65 0 00 00000', 3346.9], ['66 0 00 00000', 100.0], ['67 0 00 00000', 48079.5], ['68 0 00 00000', 1700.0], ['69 0 00 00000', 16828.5], ['70 0 00 00000', 350802.1], ['71 0 00 00000', 85.0], ['72 0 00 00000', 57577.1], ['73 0 00 00000', 17110.8], ['74 0 00 00000', 3038.1], ['78 0 00 00000', 4376.8]],
    2021: [['62 0 00 00000', 15.8], ['63 0 00 00000', 19835.8], ['64 0 00 00000', 50.0], ['66 0 00 00000', 100.0], ['67 0 00 00000', 56784.8], ['68 0 00 00000', 6342.0], ['69 0 00 00000', 14154.4], ['70 0 00 00000', 438150.8], ['72 0 00 00000', 63127.1], ['73 0 00 00000', 23439.9], ['74 0 00 00000', 4940.8], ['75 0 00 00000', 3764.8], ['76 0 00 00000', 60.0], ['78 0 00 00000', 6000.0]],
    2022: [['62 0 00 00000', 40.3], ['63 0 00 00000', 27127.0], ['64 0 00 00000', 70.0], ['66 0 00 00000', 1474.0], ['67 0 00 00000', 63461.3], ['68 0 00 00000', 9050.0], ['69 0 00 00000', 17241.0], ['70 0 00 00000', 462259.8], ['71 0 00 00000', 23.0], ['72 0 00 00000', 72320.2], ['73 0 00 00000', 24113.5], ['74 0 00 00000', 4756.3], ['75 0 00 00000', 3922.8], ['76 0 00 00000', 15.0], ['78 0 00 00000', 6000.0]],
    2023: [['62 0 00 00000', 28.2], ['63 0 00 00000', 3998.6], ['64 0 00 00000', 70.0], ['66 0 00 00000', 100.0], ['67 0 00 00000', 71584.7], ['68 0 00 00000', 52213.0], ['69 0 00 00000', 15167.1], ['70 0 00 00000', 453662.4], ['71 0 00 00000', 30.0], ['72 0 00 00000', 61283.3], ['73 0 00 00000', 48915.3], ['74 0 00 00000', 5125.9], ['75 0 00 00000', 4828.4], ['76 0 00 00000', 15.0], ['78 0 00 00000', 6000.0]],
    2024: [['62 0 00 00000', 25.0], ['63 0 00 00000', 4218.2], ['64 0 00 00000', 15.0], ['66 0 00 00000', 100.0], ['67 0 00 00000', 77437.3], ['68 0 00 00000', 28781.3], ['69 0 00 00000', 28567.6], ['70 0 00 00000', 471137.9], ['71 0 00 00000', 15.0], ['72 0 00 00000', 60988.5], ['73 0 00 00000', 40917.6], ['74 0 00 00000', 5027.5], ['75 0 00 00000', 4858.0], ['76 0 00 00000', 5.0]]
};

const countries_prog = {
    '62 0 00 00000': {
        name: 'Муниципальная программа "Развитие муниципальной службы администрации муниципального образования Октябрьский район Оренбургской области"',
        color: '#FE2371'
    },
    '63 0 00 00000': {
        name: 'Муниципальная программа "Экономическое развитие муниципального образования Октябрьский район Оренбургской области"',
        color: '#544FC5'
    },
    '64 0 00 00000': {
        name: 'Муниципальная программа "Комплексные меры по противодействию злоупотреблению наркотиками и их незаконному обороту и обеспечению правопорядка на территории муниципального образования Октябрьский район Оренбургской области"',
        color: '#2CAFFE'
    },
    '65 0 00 00000': {
        name: 'Национальная экономика',
        color: '#FE6A35'
    },
    '66 0 00 00000': {
        name: 'Муниципальная программа "Обеспечение медицинскими кадрами лечебно-профилактических учреждений муниципального образования Октябрьский район Оренбургской области "',
        color: '#6B8ABC'
    },
    '67 0 00 00000': {
        name: 'Муниципальная программа «Развитие культуры муниципального образования Октябрьский район Оренбургской области»',
        color: '#1C74BD'
    },
    '68 0 00 00000': {
        name: 'Муниципальная программа "Развитие молодежной политики, физической культуры, спорта и туризма в муниципальном образовании Октябрьский район Оренбургской области"',
        color: '#00A6A6'
    },
    '69 0 00 00000': {
        name: 'Муниципальная программа «Стимулирование развития жилищного строительства в муниципальном образовании Октябрьский район Оренбургской области»',
        color: '#D568FB'
    },
    '70 0 00 00000': {
        name: 'Муниципальная программа "Развитие системы образования  муниципального образования Октябрьский район Оренбургской области"',
        color: '#D568FB'
    },
    '71 0 00 00000': {
        name: 'Муниципальная программа «О комплексных мерах по профилактике терроризма и экстремизма на территории муниципального образования Октябрьский район Оренбургской области »',
        color: '#D568FB'
    },
    '72 0 00 00000': {
        name: 'Муниципальная программа «Управление муниципальными финансами муниципального образования Октябрьский район Оренбургской области» ',
        color: '#D568FB'
    },
    '73 0 00 00000': {
        name: 'Муниципальная программа «Обеспечение деятельности Администрации муниципального образования Октябрьский район Оренбургской области»',
        color: '#D568FB'
    },
    '74 0 00 00000': {
        name: 'Муниципальная программа «Оказание поддержки социально ориентированным общественным организациям и отдельным категориям  граждан муниципального образования Октябрьский район Оренбургской области»',
        color: '#D568FB'
    },
    '75 0 00 00000': {
        name: 'Муниципальная программа «Развитие сельского хозяйства и регулирование рынков сельскохозяйственной продукции, сырья и продовольствия муниципального образования Октябрьский район Оренбургской области»',
        color: '#D568FB'
    },
    '76 0 00 00000': {
        name: 'Муниципальная программа «Повышение безопасности дорожного движения в муниципальном образовании Октябрьский район Оренбургской области»',
        color: '#D568FB'
    },
    '78 0 00 00000': {
        name: 'Непрограммные мероприятия',
        color: '#D568FB'
    }
};

let barprog = {
    chart: {
        backgroundColor: null,
        renderTo: 'bar',
        type: 'bar'
    },
    countries_prog,
    title: {
        text: 'Структура расходов по программам',
        align: 'left'
    },
    subtitle: {
        text: '14 муниципальных программ',
        align: 'left'
    },
    xAxis: {
        type: 'category',
        title: {
            text: null
        },
        gridLineWidth: 0,
        lineWidth: 0
    },
    yAxis: {
        lineColor: 'black',
        lineWidth: 1,
        min: 0,
        max: 480000,
        title: {
            text: 'Тысяч рублей',
            align: 'high'
        },
        labels: {
            overflow: 'justify'
        },
        gridLineWidth: 1,
        tickInterval: 20000,
        breaks: [{
            from: 80000,
            to: 440000,
            breakSize: 20000
        }],
        events: {
            pointBreak: pointBreakColumn,
            pointOutsideOfBreak: pointOutsideOfBreak
        },
    },
    tooltip: {
        headerFormat: '<span style="font-size: 15px">' +
            '{series.chart.options.countries_prog.(point.key).name}' +
            '</span><br/>',
        pointFormat: '<span style="color:{point.color}">\u25CF</span> ' +
            '<b>{point.y} тыс.руб.</b><br/>'
    },
    plotOptions: {
        bar: {
            borderRadius: '20%',
            dataLabels: {
                enabled: true
            },
            groupPadding: 0.1
        },
        series: {
            colorByPoint: true,
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor:
            Highcharts.defaultOptions.legend.backgroundColor || '#FFFFFF',
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: '2024 План',
        data: prog[2024].slice()
    }]
};

Highcharts.wrap(
    Highcharts.Axis.prototype,
    'getLinePath', function (proceed, lineWidth) {
        const axis = this,
            brokenAxis = axis.brokenAxis,
            path = proceed.call(this, lineWidth),
            start = path[0];

        let x = start[1],
            y = start[2];

        (brokenAxis.breakArray || []).forEach(function (brk) {
            if (axis.horiz) {
                x = axis.toPixels(brk.from);
                path.splice(
                    1, 0,
                    ['L', x - 4, y], // stop
                    ['M', x - 9, y + 5],
                    ['L', x + 1, y - 5], // left slanted line
                    ['M', x - 1, y + 5],
                    ['L', x + 9, y - 5], // higher slanted line
                    ['M', x + 4, y]
                );
            } else {
                y = axis.toPixels(brk.from);
                path.splice(
                    1, 0,
                    ['L', x, y - 4], // stop
                    ['M', x + 5, y - 9],
                    ['L', x - 5, y + 1], // lower slanted line
                    ['M', x + 5, y - 1],
                    ['L', x - 5, y + 9], // higher slanted line
                    ['M', x, y + 4]
                );
            }
        });
        return path;
    });

var chart2 = new Highcharts.Chart(pie);
var chart3 = new Highcharts.Chart(columnAndPie);
var chart4 = new Highcharts.Chart(column);
var chart5 = new Highcharts.Chart(colrzpz);
var chart6 = new Highcharts.Chart(barprog);
var chart7 = new Highcharts.Chart(dr);
var chart8 = new Highcharts.Chart(column3);

let profit = document.querySelector(".profit");
let expense = document.querySelector(".expense");
let deficit = document.querySelector(".deficit");
let dProfit = document.querySelector(".d-proc");
let dExpense = document.querySelector(".r-proc");
$("#list").on('change', function(){
var selVal = $("#list").val();
if(selVal == "2021" || selVal == '')

{
    chart2.update({
        title: {
            text: 'Доходы бюджета на 2021 год. Факт'
        },
        series: [{
            data: d2021
        }],
        drilldown: { series: dd2021}
    });
    chart4.update({
        title: {
            text: 'Ведомственная структура расходов за ' + (selVal) + ' год.'
        },
        subtitle: {
            text: 'Сравнение расходов c ' + (selVal-1) +'годом.'
        },
        series: [{
            name: selVal - 1,
            data: data[selVal-1].slice()
        }, {
            name: selVal,
            data: getData(data[selVal]).slice()
        }]
    });
    chart5.update({
        title: {
            text: 'Структура расходов по отраслям за ' + (selVal) + ' год.'
        },
        series: datarzpz2[2021].slice()
    });
    chart6.update({
        subtitle: {
            text: '13 муниципальных программ',
            align: 'left'
        },
        series: [{
            name: '2021 Факт',
            data: prog[2021].slice()
        }]
    });
    chart7.update({
        xAxis: {
            categories: [2021],
        },
        series: [{
            name: 'Профицит',
            data: [Math.abs(d_p[1])]
        }, {
            data: [ddd[1]],
        }, {
            data: [rrr[1]],
        }],
    });
    smoothly(profit, "textContent", ddd[1].toLocaleString());
    smoothly(expense, "textContent", rrr[1].toLocaleString());
    smoothly(deficit, "textContent", d_p[1].toLocaleString());
    smoothly(dProfit, "textContent", '16.72% 🢅');
    smoothly(dExpense, "textContent", '16.63% 🢅');
}
else if(selVal == "2022")
{
    chart2.update({
        title: {
            text: 'Доходы бюджета на 2022 год. Факт'
        },
        series: [{
            data: d2022
        }],
        drilldown: { series: dd2022}
    });
    chart4.update({
        title: {
            text: 'Ведомственная структура расходов за ' + (selVal) + ' год.'
        },
        subtitle: {
            text: 'Сравнение расходов c ' + (selVal-1) +'годом.'
        },
        series: [{
            name: selVal - 1,
            data: data[selVal-1].slice()
        }, {
            name: selVal,
            data: getData(data[selVal]).slice()
        }]
    });
    chart5.update({
        title: {
            text: 'Структура расходов по отраслям за ' + (selVal) + ' год.'
        },
        series: datarzpz2[2022].slice()
    });
    chart6.update({
        subtitle: {
            text: '14 муниципальных программ',
            align: 'left'
        },
        series: [{
            name: '2022 Факт',
            data: prog[2022].slice()
        }]
    });
    chart7.update({
        xAxis: {
            categories: [2022],
        },
        series: [{
            name: 'Профицит',
            data: [Math.abs(d_p[2])]
        }, {
            data: [ddd[2]],
        }, {
            data: [rrr[2]],
        }],
    });
    smoothly(profit, "textContent", ddd[2].toLocaleString());
    smoothly(expense, "textContent", rrr[2].toLocaleString());
    smoothly(deficit, "textContent", d_p[2].toLocaleString());
    smoothly(dProfit, "textContent", '16.63% 🢅');
    smoothly(dExpense, "textContent", '9.65% 🢅');
}
else if(selVal == "2023")
{   
    chart2.update({
        title: {
            text: 'Доходы бюджета на 2023 год. Факт'
        },
        series: [{
            data: d2023
        }],
        drilldown: { series: dd2023}
    });
    chart4.update({
        chart: {
            backgroundColor: null,
        },
        title: {
            text: 'Ведомственная структура расходов за ' + (selVal) + ' год.'
        },
        subtitle: {
            text: 'Сравнение расходов c ' + (selVal-1) +'годом.'
        },
        
        series: [{
            name: selVal - 1,
            data: data[selVal-1].slice()
        }, {
            name: selVal,
            data: getData(data[selVal]).slice()
        }]
    });
    chart5.update({
        title: {
            text: 'Структура расходов по отраслям за ' + (selVal) + ' год.'
        },
        series: datarzpz2[2023].slice()
    });
    chart6.update({
        subtitle: {
            text: '14 муниципальных программ'
        },
        series: [{
            name: '2023 Факт',
            data: prog[2023].slice()
        }]
    });
    chart7.update({
        xAxis: {
            categories: [2023],
        },
        series: [{
            name: 'Дефицит',
            data: [Math.abs(d_p[3])]
        }, {
            data: [ddd[3]],
        }, {
            data: [rrr[3]],
        }],
    });
    smoothly(profit, "textContent", ddd[3].toLocaleString());
    smoothly(expense, "textContent", rrr[3].toLocaleString());
    smoothly(deficit, "textContent", d_p[3].toLocaleString());
    smoothly(dProfit, "textContent", '-8,59% 🢆');
    smoothly(dExpense, "textContent", '3.68% 🢅');
} 
else if(selVal == "2024")
{
    chart2.update({
        title: {
            text: 'Доходы бюджета на 2024 год. План'
        },
        series: [{
            data: d2024
        }],
        drilldown: { series: dd2024}
    });
    chart4.update({
        title: {
            text: 'Ведомственная структура расходов за ' + (selVal) + ' год.'
        },
        subtitle: {
            text: 'Сравнение расходов c ' + (selVal-1) +'годом.'
        },
        series: [{
            name: selVal - 1,
            data: data[selVal-1].slice()
        }, {
            name: selVal,
            data: getData(data[selVal]).slice()
        }]
    });
    chart5.update({
        title: {
            text: 'Структура расходов по отраслям за ' + (selVal) + ' год.'
        },
        series: datarzpz2[2020].slice()
    });
    chart6.update({
        subtitle: {
            text: '14 муниципальных программ',
            align: 'left'
        },
        series: [{
            name: '2024 План',
            data: prog[2024].slice()
        }]
    });
    chart7.update({
        xAxis: {
            categories: [2024],
        },
        series: [{
            name: 'Дефицит',
            data: [Math.abs(d_p[4])]
        }, {
            data: [ddd[4]],
        }, {
            data: [rrr[4]],
        }],
    });
    smoothly(profit, "textContent", ddd[4].toLocaleString());
    smoothly(expense, "textContent", rrr[4].toLocaleString());
    smoothly(deficit, "textContent", d_p[4].toLocaleString());
    smoothly(dProfit, "textContent", '7,74% 🢅');
    smoothly(dExpense, "textContent", '2.47% 🢅');
}; 
 
 
});